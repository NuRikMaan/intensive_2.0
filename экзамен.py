import sqlite3
from prettytable import PrettyTable

def создать_бд():
    """Создает базу данных и таблицу клиентов, если они не существуют."""
    conn = sqlite3.connect('клиенты_банка.db')
    cursor = conn.cursor()

    cursor.execute("""
        CREATE TABLE IF NOT EXISTS клиенты (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            фио TEXT NOT NULL,
            паспортные_данные TEXT NOT NULL,
            статус_клиента TEXT NOT NULL,
            номер_счета TEXT NOT NULL,
            остаток_на_балансе REAL NOT NULL
        )
    """)

    conn.commit()
    conn.close()
    print("База данных и таблица созданы (если не существовали ранее).")


def добавить_клиента(фио, паспортные_данные, статус_клиента, номер_счета, остаток_на_балансе):
    """Добавляет нового клиента в базу данных."""
    conn = sqlite3.connect('клиенты_банка.db')
    cursor = conn.cursor()
    
    cursor.execute("""
        INSERT INTO клиенты (фио, паспортные_данные, статус_клиента, номер_счета, остаток_на_балансе)
        VALUES (?, ?, ?, ?, ?)
    """, (фио, паспортные_данные, статус_клиента, номер_счета, остаток_на_балансе))
    
    conn.commit()
    conn.close()
    print(f"Клиент {фио} добавлен.")

def получить_всех_клиентов():
    """Возвращает список всех клиентов из базы данных."""
    conn = sqlite3.connect('клиенты_банка.db')
    cursor = conn.cursor()

    cursor.execute("SELECT * FROM клиенты")
    клиенты = cursor.fetchall()
    
    conn.close()
    return клиенты


def показать_клиентов_в_таблице():
    """Выводит информацию обо всех клиентах в виде таблицы."""
    клиенты = получить_всех_клиентов()

    if клиенты:
        table = PrettyTable()
        table.field_names = ["ID", "ФИО", "Паспорт", "Статус", "Счет", "Баланс"]

        for клиент in клиенты:
            table.add_row([клиент[0], клиент[1], клиент[2], клиент[3], клиент[4], клиент[5]])
        
        print(table)
    else:
         print("В базе данных нет клиентов.")



if __name__ == '__main__':
    создать_бд()

    # Добавляем несколько примеров клиентов
    добавить_клиента("Иванов Иван Иванович", "1234 567890", "не сотрудник банка", "1234567890123456", 10000.50)
    добавить_клиента("Петров Петр Петрович", "9876 543210", "сотрудник банка", "9876543210987654", 5000.00)
    добавить_клиента("Сидорова Анна Сергеевна", "4567 890123", "не сотрудник банка", "4567890123456789", 25000.75)

    # Выводим информацию о клиентах
    показать_клиентов_в_таблице()